<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World!</title>
    <script src="public/vue.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body id="app">
    <div class="flex">
      <input type="file" id="photoFile" multiple accept="image/*" />
      <button @click="submitPhoto">submit</button>
    </div>

    {{ message }}
  </body>

  <script>
    const { createApp } = Vue
    const port = 3002
    createApp({
      data() {
        return {
          message: 'Hello Vue!'
        }
      },
      methods: {
        submitPhoto() {
          const file = document.querySelector('#photoFile')
          const formData = new FormData()
          Array.from(file.files).forEach(e =>
            formData.append('photos', e, 'test')
          )
          fetch(`http://127.0.0.1:${port}/upload`, {
            method: 'POST',
            body: formData
          })
            .then(res => {
              console.log('before:', res)
              res.json()
            })
            .then(data => console.log(data))
        },
        getDirStructure(dirName) {
          fetch(`http://127.0.0.1:${port}/getDirStructure?dirName=${dirName}`, {
            method: 'GET'
          }).then(res => {
            console.log(res)
            res.json()
          })
        }
      },
      mounted() {
        this.getDirStructure('');
      }
    }).mount('#app')
  </script>
</html>
